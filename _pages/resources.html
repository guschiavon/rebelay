---
layout: default
title: Canyoning Resources and Training - Re:belay Canyoning
description:
keywords:
---
<!-- <style>
  .fc-event {
    position: relative;
  }

  .fc-event .fc-title,
  .fc-event .fc-location,
  .fc-event .fc-description {
    position: relative;
    top: 0;
    left: 0;
    right: 0;
    text-align: center;
    padding: 2px;
    background-color: #fff;
    font-size: 12px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .fc-event .fc-location {
    top: 20px;
  }

  .fc-event .fc-description {
    top: 40px;
  }
</style> -->
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@fullcalendar/google-calendar@6.1.8/index.global.min.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
      const calendarEl = document.getElementById('calendar');
      const eventEl = document.getElementById('event');
      const calendar = new FullCalendar.Calendar(calendarEl, {
        headerToolbar: {
          left: 'prev,next today',
          center: 'title',
          right: 'listWeek,dayGridMonth,multiMonthYear'
        },
        buttonText: {
          today: 'today',
          month: 'month',
          week: 'week',
          day: 'day',
          year: 'year',
          multiMonthYear: 'year'
        },        
        initialView: 'dayGridMonth',
        googleCalendarApiKey: 'AIzaSyB99XNLOAsQIHFwo4wFZ0H0jgGxEDSsr1A',        
        eventSources: [
          {
            googleCalendarId: 'fc427b23f3a37346f0c88019e57abc1ece390381480bbd6a976b6392c0383805@group.calendar.google.com',
          },
          {
            googleCalendarId: 'f32a825d1e896ae19a0478fed6ab8483b1906bfd6ec30a8364f6a311fee61148@group.calendar.google.com'
          },
          {
            url: 'https://canyoningcolorado.com/course-data.json', // use the `url` property
            method: 'GET',
            color: 'red',    
            textColor: 'white'
          }
        ],
        eventDidMount: function (info) {          
          // Display event information on the event element
          let eventInstance = info.el;          
          // JSON data from the 'description' field on Google Calendar
          let eventInfo = info.event.extendedProps.description;          
          // parse the JSON object
          let extendedProps = JSON.parse(eventInfo);
          console.log(extendedProps);

          // Access the custom data within extendedProps
          let url = extendedProps.url;          
          let summary = extendedProps.summary;
          let organizer = extendedProps.organizer;
          let title = info.event.title;

          // Create DOM elements
          let titleEl = document.createElement('h3');
          titleEl.innerText = title;
          let locationEl = document.createElement('span');          
          locationEl.innerHTML = info.event.extendedProps.location;
          let summaryEl = document.createElement('p');          
          summaryEl.innerHTML = summary;

          let ctaEl = document.createElement('a');
          ctaEl.classList.add('event-cta--btn');
          ctaEl.innerText = 'learn more';
          ctaEl.setAttribute('aria-label',`Click to learn more about event called ${info.event.title}`);
          ctaEl.href = url;
          
          // eventEl.appendChild(locationEl);
          // eventEl.appendChild(summaryEl);
          eventInstance.href = url;
          // Redirect to a dynamic URL on event click
          eventInstance.addEventListener('click', function () {        
            event.preventDefault();
            eventInfo.innerHTML = '';
            eventEl.appendChild(titleEl);
            eventEl.appendChild(locationEl);
            eventEl.appendChild(summaryEl);
            eventEl.appendChild(ctaEl);
            // window.open(url, '_blank');
          });
        }
      });           
      calendar.render();
    });
</script>  
  <div class="container mx-auto lg:w-3/5 grid grid-cols-2">
    <div id='calendar' class="col-span-1 p-6"></div>
    <div id='events' class="col-span-1 p-6">
      <h2 class="section-heading text-yellow-500">Events</h2>
      <div id="event" class="flex flex-col gap-2 p-6 border-2 rounded-md border-gray-500">
        
        <span class="text-tiny">Opens in a new tab</span>
      </div>
    </div>
  </div>


  <script>
    // Function to fetch events from Google Calendar
      async function fetchEventsFromGoogleCalendar(calendarId) {
        try {
          const response = await fetch(
            `https://www.googleapis.com/calendar/v3/calendars/${calendarId}/events?key=${CAL_API}`
          );

          if (!response.ok) {
            throw new Error('Failed to fetch events from Google Calendar');
          }

          const data = await response.json();
          const events = data.items.map((event) => ({
            summary: event.summary,
            url: event.htmlLink,
            location: event.location,
            organizer: event.organizer.displayName,
          }));

          return events;
        } catch (error) {
          console.error(error);
          return [];
        }
      }

      // Usage example
      const calendarId = 'fc427b23f3a37346f0c88019e57abc1ece390381480bbd6a976b6392c0383805@group.calendar.google.com';
      const apiKey = 'AIzaSyB99XNLOAsQIHFwo4wFZ0H0jgGxEDSsr1A';

      fetchEventsFromGoogleCalendar(calendarId)
        .then((events) => {
          console.log(events);
          // Use the events data as needed
        })
        .catch((error) => {
          console.error('Error:', error);
        });

  </script>
